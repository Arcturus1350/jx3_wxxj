# 点配对最小负担值问题

## 问题描述

场地上有8个点，标号1~8。随机选择4个点作为集合P，剩余4个点作为集合Q。需要将P中的每个点与Q中的一个点进行一一配对，使得总负担值最小。

每个配对(p[i], q[i])的负担值为：$val[i] = (p[i] - q[i])^2$

总负担值：val_all = \sum_(i=1)^(4)(p[i] - q[i])^2，i = 1,2,3,4

## 最优解法思路

**核心思想：排序后顺序配对**

将P数组和Q数组都按升序排序后，按对应位置顺序配对，即排序后的P[i]与排序后的Q[i]配对。

## 正确性证明

**定理**：将P和Q分别排序后按顺序配对，可以得到最小的总负担值。

**证明**（交换论证法）：

设P'和Q'分别是P和Q的升序排列。

假设存在某个配对方案不是按顺序配对的，即存在i < k，但P'[i]配对Q'[j]，P'[k]配对Q'[m]，其中j > m。

这两对的负担值为：

$cost1 = (P'[i] - Q'[j])^2 + (P'[k] - Q'[m])^2$


现在交换配对方式，让P'[i]配对Q'[m]，P'[k]配对Q'[j]：

$cost2 = (P'[i] - Q'[m])^2 + (P'[k] - Q'[j])^2$

计算差值：

$$

cost1 - cost2 
= (P'[i] - Q'[j])^2 + (P'[k] - Q'[m])^2 - (P'[i] - Q'[m])^2 - (P'[k] - Q'[j])^2
= P'[i]^2 - 2P'[i]Q'[j] + Q'[j]^2 + P'[k]^2 - 2P'[k]Q'[m] + Q'[m]^2 
  - P'[i]^2 + 2P'[i]Q'[m] - Q'[m]^2 - P'[k]^2 + 2P'[k]Q'[j] - Q'[j]^2
= 2P'[i]Q'[m] - 2P'[i]Q'[j] + 2P'[k]Q'[j] - 2P'[k]Q'[m]
= 2(P'[k] - P'[i])(Q'[j] - Q'[m])

$$

由于：
- i < k，所以P'[i] ≤ P'[k]，即(P'[k] - P'[i]) ≥ 0
- j > m，所以Q'[j] ≥ Q'[m]，即(Q'[j] - Q'[m]) ≥ 0

因此：cost1 - cost2 = 2(P'[k] - P'[i])(Q'[j] - Q'[m]) ≥ 0

这说明cost2 ≤ cost1，即交换后的配对方案不会更差。

通过反复应用这个交换论证，任何非顺序配对都可以通过交换变为顺序配对而不增加总负担值。因此，**排序后顺序配对是最优解**。

## 算法步骤

1. 读入4个选中的点p[i]
2. 计算剩余的4个点q[i]（在1~8中但不在p中的点）
3. 对p数组和q数组分别排序（升序）
4. 按顺序配对：排序后的p[i]与排序后的q[i]配对
5. 按p值从小到大输出配对结果

## 时间复杂度

O(n log n)，其中n=4，主要开销在排序。实际上由于n很小，时间复杂度可视为O(1)。

## 空间复杂度

O(n)，需要存储两个数组。

